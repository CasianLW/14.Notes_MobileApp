import{I as M,a as V,b as F,c as B,d as T,F as z,E as A,l as N,r as E,m as P,u as j,n as D,p as i,q as H,s as K,v as Z,x as G,_ as J,f as n,o as c,g as O,w as s,h as o,i as p,k as h,y as Q,z as R,j as f,A as g,t as U,B as W,C as X}from"./index-250bcd66.js";import{E as Y}from"./ExploreContainer-7b83c8ab.js";i("customRequired",e=>!e||e.trim()===""?"Champ obligatoire":!0);i("required",K);i("email",Z);i("customEmail",e=>!e||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"Entrez une adresse email valide":!0);i("min",G);i("password",e=>/(?=.*[A-Z])/.test(e)?!0:"Le mot de passe doit contenir au moins une lettre capitale");H({generateMessage:e=>{var t;const a={customRequired:"Champ obligatoire",customEmail:"Entrez une adresse email valide",password:"Le mot de passe doit contenir au moins une lettre capitale",required:"Ce champ est obligatoire",min:"Le mot de passe doit avoir au moins 8 caractéres",email:"Entrez une adresse email valide"},v=e.rule.name;return(t=a[v])!=null?t:"This field is invalid"}});const $={components:{IonPage:M,IonHeader:V,IonToolbar:F,IonTitle:B,IonContent:T,ExploreContainer:Y,Field:z,ErrorMessage:A,IonSpinner:N},setup(){const e=E(!1),{handleSubmit:a,resetForm:v,errors:t}=P(),b=E(!1),u=E(""),w="customRequired|email",x="required|min:8|password",y=j(),d=D(),m=a(async l=>{e.value=!0;try{await y.login(l.email,l.password),d.push({path:"/home"})}catch(_){b.value=!0,console.log(_),u.value="Authenification échouée"}e.value=!1,setTimeout(()=>{u.value=""},3e3)});return{error:b,errorMessage:u,login:m,handleSubmit:a,errors:t,emailRules:w,passwordRules:x,activeSpinner:e}}};const S=e=>(W("data-v-4ce3def3"),e=e(),X(),e),ee={key:0},oe={key:0},te={key:0,class:"ion-text-center"},ne=S(()=>h("br",null,null,-1)),se=S(()=>h("br",null,null,-1)),ae={key:0,class:"error ion-text-center"};function re(e,a,v,t,b,u){const w=n("ion-title"),x=n("ion-toolbar"),y=n("ion-header"),d=n("ion-label"),m=n("ion-input"),l=n("ErrorMessage"),_=n("Field"),I=n("ion-item"),k=n("ion-button"),C=n("ion-spinner"),q=n("ion-content"),L=n("ion-page");return c(),O(L,null,{default:s(()=>[o(q,{fullscreen:!0},{default:s(()=>[o(y,null,{default:s(()=>[o(x,null,{default:s(()=>[o(w,{class:"ion-text-center"},{default:s(()=>[p("Login")]),_:1})]),_:1})]),_:1}),h("main",null,[h("form",{onSubmit:a[0]||(a[0]=Q((...r)=>t.login&&t.login(...r),["prevent"]))},[o(I,null,{default:s(()=>[o(d,{position:"stacked"},{default:s(()=>[p("Email:")]),_:1}),o(_,{name:"email",rules:t.emailRules},{default:s(({field:r})=>[o(m,R({type:"text"},r,{autocomplete:"email"}),null,16),r.value?(c(),f("div",ee,[o(l,{name:"email"})])):g("",!0)]),_:1},8,["rules"])]),_:1}),o(I,null,{default:s(()=>[o(d,{position:"stacked"},{default:s(()=>[p("Password:")]),_:1}),o(_,{name:"password",rules:t.passwordRules},{default:s(({field:r})=>[o(m,R({type:"password"},r,{autocomplete:"current-password"}),null,16),r.value?(c(),f("div",oe,[o(l,{name:"password"})])):g("",!0)]),_:1},8,["rules"])]),_:1}),o(k,{expand:"full",type:"submit"},{default:s(()=>[p("Login")]),_:1}),t.activeSpinner?(c(),f("div",te,[ne,se,o(C,{color:"primary"})])):g("",!0)],32),t.error?(c(),f("div",ae,U(t.errorMessage),1)):g("",!0)])]),_:1})]),_:1})}const ce=J($,[["render",re],["__scopeId","data-v-4ce3def3"]]);export{ce as default};
