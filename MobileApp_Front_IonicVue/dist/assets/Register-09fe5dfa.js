import{I as V,a as F,b as z,c as B,d as T,F as N,E as A,l as L,m as P,r as E,u as j,n as D,p as c,q as H,s as K,v as U,x as Z,_ as G,f as n,o as l,g as J,w as t,h as e,i as u,k as w,y as O,z as k,j as f,A as g,t as Q,B as W,C as X}from"./index-250bcd66.js";import{E as Y}from"./ExploreContainer-7b83c8ab.js";c("customRequired",o=>!o||o.trim()===""?"Champ obligatoire":!0);c("required",K);c("email",U);c("customEmail",o=>!o||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?"Entrez une adresse email valide":!0);c("min",Z);c("password",o=>/(?=.*[A-Z])/.test(o)?!0:"Le mot de passe doit contenir au moins une lettre capitale");H({generateMessage:o=>{var s;const i={customRequired:"Champ obligatoire",customEmail:"Entrez une adresse email valide",password:"Le mot de passe doit contenir au moins une lettre capitale",required:"Ce champ est obligatoire",min:"Le mot de passe doit avoir au moins 8 caractÃ¨res",email:"Entrez une adresse email valide"},h=o.rule.name;return(s=i[h])!=null?s:"This field is invalid"}});const $={components:{IonPage:V,IonHeader:F,IonToolbar:z,IonTitle:B,IonContent:T,ExploreContainer:Y,Field:N,ErrorMessage:A,IonSpinner:L},setup(){const{handleSubmit:o,resetForm:i,errors:h}=P(),s=E(!1),x=E(!1),v=E(""),R="required",y="customRequired|email",b="required|min:8|password",d=j(),m=D(),_=o(async r=>{s.value=!0;try{await d.register(r.username,r.email,r.password),m.push({path:"/home"})}catch(p){x.value=!0,console.log(p),v.value="Register failed, try again"}s.value=!1,setTimeout(()=>{v.value=""},3e3)});return{handleSubmit:o,errors:h,error:x,errorMessage:v,usernameRules:R,emailRules:y,passwordRules:b,register:_,activeSpinner:s}}};const I=o=>(W("data-v-649dd7dc"),o=o(),X(),o),ee={key:0},te={key:0},oe={key:0},se={key:0,class:"ion-text-center"},ne=I(()=>w("br",null,null,-1)),ae=I(()=>w("br",null,null,-1)),re={key:1,class:"error ion-text-center"};function ie(o,i,h,s,x,v){const R=n("ion-title"),y=n("ion-toolbar"),b=n("ion-header"),d=n("ion-label"),m=n("ion-input"),_=n("ErrorMessage"),r=n("Field"),p=n("ion-item"),S=n("ion-button"),q=n("ion-spinner"),C=n("ion-content"),M=n("ion-page");return l(),J(M,null,{default:t(()=>[e(b,null,{default:t(()=>[e(y,null,{default:t(()=>[e(R,{class:"ion-text-center"},{default:t(()=>[u("Register")]),_:1})]),_:1})]),_:1}),e(C,{fullscreen:!0},{default:t(()=>[e(b,{collapse:"condense"},{default:t(()=>[e(y,null,{default:t(()=>[e(R,{size:"large"},{default:t(()=>[u("Register")]),_:1})]),_:1})]),_:1}),w("main",null,[w("form",{onSubmit:i[0]||(i[0]=O((...a)=>s.register&&s.register(...a),["prevent"]))},[e(p,null,{default:t(()=>[e(d,{position:"stacked"},{default:t(()=>[u("Username:")]),_:1}),e(r,{name:"username",rules:s.usernameRules},{default:t(({field:a})=>[e(m,k({type:"text"},a,{autocomplete:"username"}),null,16),a.value?(l(),f("div",ee,[e(_,{name:"username"})])):g("",!0)]),_:1},8,["rules"])]),_:1}),e(p,null,{default:t(()=>[e(d,{position:"stacked"},{default:t(()=>[u("Email:")]),_:1}),e(r,{name:"email",rules:s.emailRules},{default:t(({field:a})=>[e(m,k({type:"email"},a,{autocomplete:"email"}),null,16),a.value?(l(),f("div",te,[e(_,{name:"email"})])):g("",!0)]),_:1},8,["rules"])]),_:1}),e(p,null,{default:t(()=>[e(d,{position:"stacked"},{default:t(()=>[u("Password:")]),_:1}),e(r,{name:"password",rules:s.passwordRules},{default:t(({field:a})=>[e(m,k({type:"password"},a,{autocomplete:"current-password"}),null,16),a.value?(l(),f("div",oe,[e(_,{name:"password"})])):g("",!0)]),_:1},8,["rules"])]),_:1}),e(S,{expand:"full",type:"submit"},{default:t(()=>[u("Register")]),_:1})],32),s.activeSpinner?(l(),f("div",se,[ne,ae,e(q,{color:"primary"})])):g("",!0),s.error?(l(),f("div",re,Q(s.errorMessage),1)):g("",!0)])]),_:1})]),_:1})}const ce=G($,[["render",ie],["__scopeId","data-v-649dd7dc"]]);export{ce as default};
